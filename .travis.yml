language: java
git:
  depth: 3
sudo: required
jdk:
  - oraclejdk7

before_install:
  - export MVN_SETTINGS="${TRAVIS_BUILD_DIR}/gsi-config"
  - git clone https://github.com/oicr-gsi/gsi-config.git ${MVN_SETTINGS}

install:
  - mvn install -s "${MVN_SETTINGS}/settings.xml" -DskipTests=true -Dmaven.javadoc.skip=true -B -V

before_script:
  - export MAVEN_OPTS='-Xms1g -Xmx2g'
  - export SEQWARE_SETTINGS="${TRAVIS_BUILD_DIR}/seqware_settings"
  - touch "${SEQWARE_SETTINGS}"

script:
  - mvn -s "${MVN_SETTINGS}/settings.xml" test -B

cache:
  directories:
    - $HOME/.m2
